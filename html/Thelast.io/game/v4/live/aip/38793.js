"use strict";(self.__VM_WPK_C_LR__m=self.__VM_WPK_C_LR__m||[]).push([[38793],{64701:(n,t,e)=>{e.d(t,{yq:()=>p});var a=e(82284),o=e(64467),i=e(45458),r=e(51457),c=e(63013),s=e(90740),l=e(79189),u=e(96155);function p(){var n,t,e,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=p.namespace,f=p.displayName,v=p.consentDataHandler,g=p.parseConsentData,m=p.getNullConsent,h=p.cmpHandlers,y=p.DEFAULT_CMP,b=void 0===y?"iab":y,C=p.DEFAULT_CONSENT_TIMEOUT,P=void 0===C?1e4:C;function w(n){return"consentManagement.".concat(d," ").concat(n)}function D(n,t){return n(Object.assign((0,o.A)({},"".concat(d,"Consent"),v.getConsentData()),t))}function k(){return t().then(function(n){return{error:n.error,consentData:v.getConsentData()}})}function A(){var e,a;null==n&&(e=d,a=new WeakSet,n=(0,r.Ak)(e,function(n,e){var o=this;return t().then(function(t){var r=t.consentData,s=t.error;!s||r&&a.has(s)||(a.add(s),c.logWarn.apply(void 0,[s.message].concat((0,i.A)(s.args||[])))),n.call(o,e)}).catch(function(t){c.logError.apply(void 0,["".concat(null==t?void 0:t.message," Canceling auction as per consentManagement config.")].concat((0,i.A)((null==t?void 0:t.args)||[]))),n.stopTiming(),"function"==typeof e.bidsBackHandler?e.bidsBackHandler():(0,c.logError)("Error executing bidsBackHandler")})}),(0,s.m)().requestBids.before(n,50),u.U3.before(D),(0,c.logInfo)("".concat(f," consentManagement module has been activated...")))}return function(o){var i,r,p;if(!(o=null===(i=o)||void 0===i?void 0:i[d])||"object"!==(0,a.A)(o))return(0,c.logWarn)(w("config not defined, exiting consent manager module")),null!=n&&((0,s.m)().requestBids.getHooks({hook:n}).remove(),u.U3.getHooks({hook:D}).remove(),n=null),{};(0,c.isStr)(o.cmpApi)?r=o.cmpApi:(r=b,(0,c.logInfo)(w("config did not specify cmp.  Using system default setting (".concat(b,").")))),(0,c.isNumber)(o.timeout)?p=o.timeout:(p=P,(0,c.logInfo)(w("config did not specify timeout.  Using system default setting (".concat(P,")."))));var y,C=(0,c.isNumber)(o.actionTimeout)?o.actionTimeout:null;"static"===r?(0,c.isPlainObject)(o.consentData)?(e=o.consentData,p=null,y=function(){return new l.U9(function(n){return n(v.setConsentData(g(e)))})}):(0,c.logError)(w("config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")):h.hasOwnProperty(r)?y=h[r]:(v.setConsentData(null),(0,c.logWarn)("".concat(f," CMP framework (").concat(r,") is not a supported framework.  Aborting consentManagement module and resuming auction.")),y=function(){return l.U9.resolve()});var S;return t=function(){return null==S&&(S=function(n){var t,e=n.name,a=n.consentDataHandler,o=n.setupCmp,i=n.cmpTimeout,r=n.actionTimeout,c=n.getNullConsent;return a.enable(),new Promise(function(n,s){var l,u=!1;function p(o){null!=t&&clearTimeout(t),t=null!=o?setTimeout(function(){var t,o=null!==(t=a.getConsentData())&&void 0!==t?t:u?l:c(),i="timeout waiting for ".concat(u?"user action on CMP":"CMP to load");a.setConsentData(o),n({consentData:o,error:new Error("".concat(e," ").concat(i))})},o):null}o(function(n){l=n,u||(u=!0,null!=r&&p(r))}).then(function(){return n({consentData:a.getConsentData()})},s),null!=i&&p(i)}).finally(function(){t&&clearTimeout(t)}).catch(function(n){throw a.setConsentData(null),n})}({name:f,consentDataHandler:v,setupCmp:y,cmpTimeout:p,actionTimeout:C,getNullConsent:m}).catch(function(n){throw S=null,n})),S},A(),{cmpHandler:r,cmpTimeout:p,actionTimeout:C,staticConsentData:e,loadConsentData:k,requestBidsHook:n}}}},72310:(n,t,e)=>{e.d(t,{c5:()=>d,q4:()=>p});var a=e(64467),o=e(80296),i=e(45458),r=e(79189);function c(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,a)}return e}function s(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?c(Object(e),!0).forEach(function(t){(0,a.A)(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):c(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}var l=0,u=1,p=2;function d(n){var t=n.apiName,e=n.apiVersion,c=n.apiArgs,d=void 0===c?["command","callback","parameter","version"]:c,f=n.callbackArgs,v=void 0===f?["returnValue","success"]:f,g=n.mode,m=void 0===g?l:g,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,y={},b="".concat(t,"Call"),C="".concat(t,"Return");function P(n){var t,e="string"==typeof n.data&&n.data.includes(C)?JSON.parse(n.data):n.data;if(null!=e&&null!==(t=e[C])&&void 0!==t&&t.callId){var a=e[C];y.hasOwnProperty(a.callId)&&y[a.callId].apply(y,(0,i.A)(v.map(function(n){return a[n]})))}}var w,D=function(){for(var n,e=h,a=!1;null!=e;){try{if("function"==typeof e[t]){n=e,a=!0;break}}catch(n){}try{if(e.frames["".concat(t,"Locator")]){n=e;break}}catch(n){}if(e===h.top)break;e=e.parent}return[n,a]}(),k=(0,o.A)(D,2),A=k[0],S=k[1];if(A)return S?w=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new r.U9(function(e,a){var r=A[t].apply(A,(0,i.A)(M(s(s({},n),{},{callback:n.callback||m===p?O(n.callback,e,a):void 0})).map(function(n){var t=(0,o.A)(n,2);return t[0],t[1]})));(m===u||null==n.callback&&m===l)&&e(r)})}:(h.addEventListener("message",P,!1),w=function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new r.U9(function(e,i){var r=Math.random().toString(),c=(0,a.A)({},b,s(s({},Object.fromEntries(M(n).filter(function(n){return"callback"!==(0,o.A)(n,1)[0]}))),{},{callId:r}));y[r]=O(null==n?void 0:n.callback,e,i,(t||null==(null==n?void 0:n.callback))&&function(){delete y[r]}),A.postMessage(c,"*"),m===u&&e()})}),Object.assign(w,{isDirect:S,close:function(){!S&&h.removeEventListener("message",P)}});function M(n){return n=Object.assign({version:e},n),d.map(function(t){return[t,n[t]]})}function O(n,t,e,a){var o="function"==typeof n;return function(i,r){a&&a(),m!==u&&(null==r||r?t:e)(o?void 0:i),o&&n.apply(this,arguments)}}}},95568:(n,t,e)=>{e.r(t),e.d(t,{GPPClient:()=>S,consentConfig:()=>P,enrichFPDHook:()=>N,resetConsentData:()=>_,setConsentConfig:()=>E,toConsentData:()=>T});var a=e(80296),o=e(64467),i=e(92901),r=e(23029),c=e(90740),s=e(63013),l=e(63172),u=e(75181),p=e(93177),d=e(85753),f=e(72310),v=e(79189),g=e(64701);function m(n,t,e){(function(n,t){if(t.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")})(n,t),t.set(n,e)}function h(n,t){return n.get(C(n,t))}function y(n,t,e){t||(t=[]);var a=t.length++;return Object.defineProperty({},"_",{set:function(o){t[a]=o,n.apply(e,t)}})}function b(n,t,e){return n.set(C(n,t),e),e}function C(n,t,e){if("function"==typeof n?n===t:n.has(t))return arguments.length<3?t:e;throw new TypeError("Private element is not present on this object")}var P={},w=(0,i.A)(function n(t,e){(0,r.A)(this,n),this.message=t,this.args=null==e?[]:[e]}),D=new WeakMap,k=new WeakMap,A=new WeakMap,S=function(){return(0,i.A)(function n(t){var e=this;(0,r.A)(this,n),(0,o.A)(this,"apiVersion","1.1"),m(this,D,void 0),m(this,k,void 0),m(this,A,[]),(0,o.A)(this,"initialized",!1),this.cmp=t;var i=["resolve","reject"].map(function(n){return function(t){for(;h(A,e).length;)h(A,e).pop()[n](t)}}),c=(0,a.A)(i,2);y(b,[D,this])._=c[0],y(b,[k,this])._=c[1]},[{key:"init",value:function(n){var t=this,e=this.updateWhenReady(n);return this.initialized||(n.gppVersion!==this.apiVersion&&(0,s.logWarn)("Unrecognized GPP CMP version: ".concat(n.apiVersion,". Continuing using GPP API version ").concat(this.apiVersion,"...")),this.initialized=!0,this.cmp({command:"addEventListener",callback:function(n,e){var a;null==e||e?"error"===(null==n||null===(a=n.pingData)||void 0===a?void 0:a.cmpStatus)?h(k,t).call(t,new w('CMP status is "error"; please check CMP setup',n)):t.isCMPReady((null==n?void 0:n.pingData)||{})&&["sectionChange","signalStatus"].includes(null==n?void 0:n.eventName)&&h(D,t).call(t,t.updateConsent(n.pingData)):h(k,t).call(t,new w("Received error response from CMP",n)),null==p.ad.getConsentData()||null==(null==n?void 0:n.pingData)||t.isCMPReady(n.pingData)||p.ad.setConsentData(null)}})),e}},{key:"refresh",value:function(){return this.cmp({command:"ping"}).then(this.init.bind(this))}},{key:"updateConsent",value:function(n){return new v.U9(function(t){if(null==n||(0,s.isEmpty)(n))throw new w("Received empty response from CMP",n);var e=O(n);(0,s.logInfo)("Retrieved GPP consent from CMP:",e),p.ad.setConsentData(e),t(e)})}},{key:"nextUpdate",value:function(){var n=(0,v.v6)();return h(A,this).push(n),n.promise}},{key:"updateWhenReady",value:function(n){return this.isCMPReady(n)?this.updateConsent(n):this.nextUpdate()}},{key:"isCMPReady",value:function(n){return"ready"===n.signalStatus}}],[{key:"get",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.c5;if(null==this.INST){var t=n({apiName:"__gpp",apiArgs:["command","callback","parameter"],mode:f.q4});if(null==t)throw new w("GPP CMP not found");this.INST=new this(t)}return this.INST}}])}();(0,o.A)(S,"INST",void 0);var M={iab:function(){return new v.U9(function(n){return n(S.get().refresh())})}};function O(n){if(null!=(null==n?void 0:n.applicableSections)&&!Array.isArray(n.applicableSections)||null!=(null==n?void 0:n.gppString)&&!(0,s.isStr)(n.gppString)||null!=(null==n?void 0:n.parsedSections)&&!(0,s.isPlainObject)(n.parsedSections))throw new w("CMP returned unexpected value during lookup process.",n);return["usnatv1","uscav1"].forEach(function(t){var e;null!=n&&null!==(e=n.parsedSections)&&void 0!==e&&e[t]&&(0,s.logWarn)("Received invalid section from cmp: '".concat(t,"'. Some functionality may not work as expected"),n)}),T(n)}function T(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{gppString:null==n?void 0:n.gppString,applicableSections:(null==n?void 0:n.applicableSections)||[],parsedSections:(null==n?void 0:n.parsedSections)||{},gppData:n}}function _(){P={},p.ad.reset(),S.INST=null}var j=(0,g.yq)({namespace:"gpp",displayName:"GPP",consentDataHandler:p.ad,parseConsentData:O,getNullConsent:function(){return T(null)},cmpHandlers:M});function E(n){var t,e,a;return null===(t=(e=P=j(n)).loadConsentData)||void 0===t||null===(t=t.call(e))||void 0===t||null===(a=t.catch)||void 0===a?void 0:a.call(t,function(){return null})}function N(n,t){return n(t.then(function(n){var t=p.ad.getConsentData();return t&&(Array.isArray(t.applicableSections)&&(0,l.J)(n,"regs.gpp_sid",t.applicableSections),(0,l.J)(n,"regs.gpp",t.gppString)),n}))}u.$W.getConfig("consentManagement",function(n){return E(n.consentManagement)}),d.w.before(N),(0,c.E)("consentManagementGpp")}}]);