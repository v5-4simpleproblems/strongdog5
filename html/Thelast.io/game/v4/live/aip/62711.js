"use strict";(self.__VM_WPK_C_LR__m=self.__VM_WPK_C_LR__m||[]).push([[62711],{15492:(e,r,t)=>{t.d(r,{W:()=>i});var n=t(63172);function i(e,r){var t=r.params;t&&(0,n.J)(e,"ext.prebid.bidder.".concat(r.bidder),t)}},19371:(e,r,t)=>{t.d(r,{D:()=>s});var n=t(45458),i=t(37001),o=t(70433),a=["user.keywords"].concat(i.Dy.flatMap(function(e){return["keywords","content.keywords"].map(function(r){return"".concat(e,".").concat(r)})}));function d(){for(var e=new Set,r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return t.filter(function(e){return e}).flatMap(function(e){return Array.isArray(e)?e:e.split(",")}).map(function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}).filter(function(e){return e}).forEach(function(r){return e.add(r)}),Array.from(e.keys())}function s(e){for(var r=arguments.length,t=new Array(r>1?r-1:0),i=1;i<r;i++)t[i-1]=arguments[i];return d.apply(void 0,(0,n.A)(a.map(function(r){return(0,o.A)(e,r)})).concat(t))}},20716:(e,r,t)=>{t.d(r,{o:()=>d,s:()=>a});var n=t(64467),i=t(55074),o=t(84988),a=(0,n.A)((0,n.A)((0,n.A)({},i.D4,"banner"),i.s6,"native"),i.G_,"video");function d(e,r,t){var n,d=t.mediaType;d||(d=o.X.hasOwnProperty(r.mtype)?o.X[r.mtype]:null===(n=r.ext)||void 0===n||null===(n=n.prebid)||void 0===n?void 0:n.type,a.hasOwnProperty(d)||(d=i.D4)),e.mediaType=d}},53285:(e,r,t)=>{function n(e,r,t){var n,i={};return e&&("boolean"==typeof e.gdprApplies&&(i.gdpr=Number(e.gdprApplies)),"string"==typeof e.consentString&&(i.gdpr_consent=e.consentString)),r&&(i.us_privacy=encodeURIComponent(r)),null!=t&&t.gppString&&(i.gpp=t.gppString,i.gpp_sid=null===(n=t.applicableSections)||void 0===n?void 0:n.toString()),i}t.d(r,{d:()=>n})},60881:(e,r,t)=>{t.d(r,{m:()=>y});var n=t(33981),i=t(64467),o=t(80296),a=t(98757),d=t(63013),s=t(70433),c=t(20716),u=t(49711),l=t(75181),p=t(63172),v=t(15492),f=t(90740),m=t(55074),b=t(72714),g=(0,i.A)((0,i.A)((0,i.A)((0,i.A)({},a.S3,{extPrebid:{fn:function(e,r){var t;(0,p.J)(e,"ext.prebid",(0,d.mergeDeep)({auctiontimestamp:r.auctionStart,targeting:{includewinners:!0,includebidderkeys:!1}},null===(t=e.ext)||void 0===t?void 0:t.prebid)),l.$W.getConfig("debug")&&(e.ext.prebid.debug=!0)}},extPrebidChannel:{fn:function(e){var r;(0,p.J)(e,"ext.prebid.channel",Object.assign({name:"pbjs",version:(0,f.m)().version},null===(r=e.ext)||void 0===r||null===(r=r.prebid)||void 0===r?void 0:r.channel))}},extPrebidAliases:{fn:function(e,r,t){var n=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).am,i=void 0===n?u.Ay:n;if(i.aliasRegistry[r.bidderCode]){var o=i.bidderRegistry[r.bidderCode];if(!o||!o.getSpec().skipPbsAliasing){var a;(0,p.J)(e,"ext.prebid.aliases.".concat(r.bidderCode),i.aliasRegistry[r.bidderCode]);var d=l.$W.getConfig("gvlMapping.".concat(r.bidderCode))||(null==o||null===(a=o.getSpec)||void 0===a?void 0:a.call(o).gvlid);d&&(0,p.J)(e,"ext.prebid.aliasgvlids.".concat(r.bidderCode),d)}}}}}),a.Tb,{params:{fn:v.W},adUnitCode:{fn:function(e,r){var t=r.adUnitCode;t&&(0,p.J)(e,"ext.prebid.adunitcode",t)}}}),a.WR,{mediaType:{fn:c.o,priority:99},videoCache:{fn:function(e,r){if(e.mediaType===m.G_){var t,n,i=null!==(t=null==r||null===(n=r.ext)||void 0===n||null===(n=n.prebid)||void 0===n||null===(n=n.cache)||void 0===n?void 0:n.vastXml)&&void 0!==t?t:{},o=i.cacheId,a=i.url;if(!o||!a){var d,s,c=null!==(d=null==r||null===(s=r.ext)||void 0===s||null===(s=s.prebid)||void 0===s?void 0:s.targeting)&&void 0!==d?d:{},u=c.hb_uuid,l=c.hb_cache_host,p=c.hb_cache_path;u&&l&&p&&(o=u,a="https://".concat(l).concat(p,"?uuid=").concat(u))}o&&a&&Object.assign(e,{videoCacheKey:o,vastUrl:a})}},priority:-10},bidderCode:{fn:function(e,r,t){var n,i;e.bidderCode=t.seatbid.seat,e.adapterCode=(null==r||null===(n=r.ext)||void 0===n||null===(n=n.prebid)||void 0===n||null===(n=n.meta)||void 0===n?void 0:n.adaptercode)||(null===(i=t.bidRequest)||void 0===i?void 0:i.bidder)||e.bidderCode}},pbsBidId:{fn:function(e,r){var t,n=null==r||null===(t=r.ext)||void 0===t||null===(t=t.prebid)||void 0===t?void 0:t.bidid;(0,d.isStr)(n)&&(e.pbsBidId=n)}},adserverTargeting:{fn:function(e,r){var t,n=null==r||null===(t=r.ext)||void 0===t||null===(t=t.prebid)||void 0===t?void 0:t.targeting;(0,d.isPlainObject)(n)&&(e.adserverTargeting=n)}},extPrebidMeta:{fn:function(e,r){var t;e.meta=(0,d.mergeDeep)({},null==r||null===(t=r.ext)||void 0===t||null===(t=t.prebid)||void 0===t?void 0:t.meta,e.meta)}},pbsWinTrackers:{fn:function(e,r){var t;e.eventtrackers=e.eventtrackers||[],[[r.burl,b.OA],[null==r||null===(t=r.ext)||void 0===t||null===(t=t.prebid)||void 0===t||null===(t=t.events)||void 0===t?void 0:t.win,b.RO]].filter(function(r){var t=(0,o.A)(r,2),n=t[0],i=t[1];return n&&null==e.eventtrackers.find(function(e){var r=e.method,t=e.event,o=e.url;return t===i&&r===b.Ni&&o===n})}).forEach(function(r){var t=(0,o.A)(r,2),n=t[0],i=t[1];e.eventtrackers.push({method:b.Ni,event:i,url:n})})}}}),a.Cf,{serverSideStats:{fn:function(e,r,t){Object.entries({errors:"serverErrors",responsetimemillis:"serverResponseTimeMs"}).forEach(function(e){var n=(0,o.A)(e,2),i=n[0],a=n[1],d=(0,s.A)(r,"ext.".concat(i,".").concat(t.bidderRequest.bidderCode));d&&(t.bidderRequest[a]=d,t.bidRequests.forEach(function(e){return e[a]=d}))})}}}),x=t(20348),y=(0,d.memoize)(function(){return(0,n.U)((0,x.T)(),g,(0,a.yB)(a.e4))})},94294:(e,r,t)=>{t.r(r),t.d(r,{classifiedAsVideo:()=>T,converter:()=>S,determineRubiconVideoSizeId:()=>U,encodeParam:()=>G,getPriceGranularity:()=>q,hasValidSupplyChainParams:()=>W,hasValidVideoParams:()=>N,masSizeOrdering:()=>E,resetImpIdMap:()=>z,resetRubiConf:()=>D,resetUserSync:()=>M,spec:()=>C});var n=t(45458),i=t(64467),o=t(80296),a=t(82284),d=t(90740),s=t(20348),c=t(60881),u=t(67436),l=t(75181),p=t(55074),v=t(98936),f=t(63013),m=t(70433),b=t(63172),g=t(19371),x=t(53285);function y(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function h(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?y(Object(t),!0).forEach(function(r){(0,i.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var _=l.$W.getConfig("rubicon")||{};l.$W.getConfig("rubicon",function(e){(0,f.mergeDeep)(_,e.rubicon)});var A={},j={1:"468x60",2:"728x90",5:"120x90",7:"125x125",8:"120x600",9:"160x600",10:"300x600",13:"200x200",14:"250x250",15:"300x250",16:"336x280",17:"240x400",19:"300x100",31:"980x120",32:"250x360",33:"180x500",35:"980x150",37:"468x400",38:"930x180",39:"750x100",40:"750x200",41:"750x300",42:"2x4",43:"320x50",44:"300x50",48:"300x300",53:"1024x768",54:"300x1050",55:"970x90",57:"970x250",58:"1000x90",59:"320x80",60:"320x150",61:"1000x1000",64:"580x500",65:"640x480",66:"930x600",67:"320x480",68:"1800x1000",72:"320x320",73:"320x160",78:"980x240",79:"980x300",80:"980x400",83:"480x300",85:"300x120",90:"548x150",94:"970x310",95:"970x100",96:"970x210",101:"480x320",102:"768x1024",103:"480x280",105:"250x800",108:"320x240",113:"1000x300",117:"320x100",125:"800x250",126:"200x600",144:"980x600",145:"980x150",152:"1000x250",156:"640x320",159:"320x250",179:"250x600",195:"600x300",198:"640x360",199:"640x200",213:"1030x590",214:"980x360",221:"1x1",229:"320x180",230:"2000x1400",232:"580x400",234:"6x6",251:"2x2",256:"480x820",257:"400x600",258:"500x200",259:"998x200",261:"480x480",264:"970x1000",265:"1920x1080",274:"1800x200",278:"320x500",282:"320x400",288:"640x380",484:"720x1280",524:"1x2",548:"500x1000",550:"980x480",552:"300x200",558:"640x640",562:"300x431",564:"320x431",566:"320x300",568:"300x150",570:"300x125",572:"250x350",574:"620x891",576:"610x877",578:"980x552",580:"505x656",622:"192x160",632:"1200x450",634:"340x450",680:"970x570",682:"300x240",684:"970x550",686:"300x210",688:"300x220",690:"970x170",710:"600x250",712:"340x430"};(0,f._each)(j,function(e,r){return j[e]=r});var S=(0,s.A)({request:function(e,r,t,i){var o,s=i.bidRequests,c=e(r,t,i);c.cur=["USD"],c.test=l.$W.getConfig("debug")?1:0,(0,b.J)(c,"ext.prebid.cache",{vastxml:{returnCreative:!0===_.returnVast}}),(0,b.J)(c,"ext.prebid.bidders",{rubicon:{integration:_.int_type||"pbjs"}}),(0,b.J)(c,"ext.prebid.targeting.pricegranularity",q(l.$W));var u=(0,d.m)().installedModules;return!u||u.length&&-1===u.indexOf("rubiconAnalyticsAdapter")||(0,b.J)(c,"ext.prebid.analytics",{rubicon:{"client-analytics":!0}}),function(e,r,t){var i,o={},a=g.D.apply(void 0,[t].concat((0,n.A)(r.map(function(e){return e.params.keywords}))));r.forEach(function(r){var t,n={user:{ext:{data:h({},r.params.visitor)}},site:{ext:{data:h({},r.params.inventory)}}},i=e.imp.find(function(e){var r;return null===(r=e.ext)||void 0===r||null===(r=r.prebid)||void 0===r||null===(r=r.bidder)||void 0===r||null===(r=r.rubicon)||void 0===r||null===(r=r.video)||void 0===r?void 0:r.language});i&&(n.site.content={language:null===(t=i.ext)||void 0===t||null===(t=t.prebid)||void 0===t||null===(t=t.bidder)||void 0===t||null===(t=t.rubicon)||void 0===t||null===(t=t.video)||void 0===t?void 0:t.language}),o=(0,f.mergeDeep)(o,r.ortb2||{},n);var a=l.$W.getConfig("user.id");o.user.id=o.user.id||a}),(0,f.mergeDeep)(e,o),a&&a.length&&(0,b.J)(e,"site.keywords",a.join(",")),null==e||null===(i=e.ext)||void 0===i||null===(i=i.prebid)||void 0===i||delete i.storedrequest}(c,s,t.ortb2),null==c||null===(o=c.ext)||void 0===o||null===(o=o.prebid)||void 0===o||delete o.storedrequest,!0===_.disableFloors&&delete c.ext.prebid.floors,s.filter(function(e){return"object"===(0,a.A)(e.floorData)}).length>0&&(c.ext.prebid.floors={enabled:!1}),c},imp:function(e,r,t){var n,i=P(r);if(!i.includes(p.D4)||1!=i.length){var o=e(r,t);return o.id=r.adUnitCode,delete o.banner,"atf"===r.params.position&&o.video&&(o.video.pos=1),"btf"===r.params.position&&o.video&&(o.video.pos=3),null===(n=o.ext)||void 0===n||null===(n=n.prebid)||void 0===n||delete n.storedrequest,!0===r.params.bidonmultiformat&&i.length>1&&(0,b.J)(o,"ext.prebid.bidder.rubicon.formats",i),function(e,r){if("USD"!=r.bidfloorcur&&(delete r.bidfloor,delete r.bidfloorcur),!r.bidfloor){var t=parseFloat((0,m.A)(e,"params.floor"));isNaN(t)||(r.bidfloor=t,r.bidfloorcur="USD")}}(r,o),o.id=A[o.id]?o.id+A[o.id]++:(A[o.id]=2,o.id),o}},bidResponse:function(e,r,t){var n,i=e(r,t);i.meta.mediaType=(0,m.A)(r,"ext.prebid.type");var a=t.bidRequest,d="outstream"===(null===(n=a.mediaTypes.video)||void 0===n?void 0:n.context)?R(a,p.G_):[void 0,void 0],s=(0,o.A)(d,2),c=s[0],u=s[1];return i.width=r.w||c||i.playerWidth||0,i.height=r.h||u||i.playerHeight||0,i.mediaType===p.G_&&"outstream"===a.mediaTypes.video.context&&(i.renderer=function(e){var r=v.A4.install({id:e.adId,url:_.rendererUrl||"https://video-outstream.rubiconproject.com/apex-2.2.1.js",config:_.rendererConfig||{},loaded:!1,adUnitCode:e.adUnitCode});try{r.setRender(k)}catch(e){(0,f.logWarn)("Prebid Error calling setRender on renderer",e)}return r}(i)),(0,m.A)(r,"ext.bidder.rp.advid")&&(0,b.J)(i,"meta.advertiserId",r.ext.bidder.rp.advid),i},context:{netRevenue:!1!==_.netRevenue,ttl:360},processors:c.m}),C={code:"rubicon",gvlid:52,supportedMediaTypes:[p.D4,p.G_,p.s6],isBidRequestValid:function(e){var r=!0;if("object"!==(0,a.A)(e.params))return!1;for(var t=0,n=["accountId","siteId","zoneId"];t<n.length;t++)if(e.params[n[t]]=parseInt(e.params[n[t]]),isNaN(e.params[n[t]]))return(0,f.logError)("Rubicon: wrong format of accountId or siteId or zoneId."),!1;var i=P(e,!0);if(!i.length)return!1;i.includes(p.G_)&&(r=N(e));var o=[p.D4,p.s6].filter(function(e){return i.includes(e)}).length>0;return o?r&&o:r},buildRequests:function(e,r){var t,n=[],i=[];if((t=e.filter(function(e){var r=P(e)||[],t=r.length,n=e.params||{},i=n.bidonmultiformat,o=n.video;return 1===t&&(r.includes(p.G_)||r.includes(p.s6))||2===t&&!r.includes(p.D4)||o&&r.includes(p.G_)||i&&(r.includes(p.G_)||r.includes(p.s6))}))&&t.length){var o=S.toORTB({bidRequests:t,bidderRequest:r});z(),i.push({method:"POST",url:"https://".concat(_.videoHost||"prebid-server",".rubiconproject.com/openrtb2/auction"),data:o,bidRequest:t})}var a=e.filter(function(e){var r=P(e)||[],t=e.params||{},n=t.bidonmultiformat,i=t.video;return r.includes(p.D4)&&(1===r.length||n||!n&&!i||!n&&i&&!r.includes(p.G_))});if(!0!==_.singleRequest)n=i.concat(a.map(function(e){var t=C.createSlotParams(e,r);return{method:"GET",url:"https://".concat(_.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:C.getOrderedParams(t).reduce(function(e,r){var n=t[r];return(0,f.isStr)(n)&&""!==n||(0,f.isNumber)(n)?"".concat(e).concat(G(r,n),"&"):e},"")+"slots=1&rand=".concat(Math.random()),bidRequest:e}}));else{var d=a.reduce(function(e,r){return(e[r.params.siteId]=e[r.params.siteId]||[]).push(r),e},{});n=i.concat(Object.keys(d).reduce(function(e,t){var n;return(n=d[t],n.map(function(e,r){return r%10==0?n.slice(r,r+10):null}).filter(function(e){return e})).forEach(function(t){var n=C.combineSlotUrlParams(t.map(function(e){return C.createSlotParams(e,r)}));e.push({method:"GET",url:"https://".concat(_.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:C.getOrderedParams(n).reduce(function(e,r){var t=n[r];return(0,f.isStr)(t)&&""!==t||(0,f.isNumber)(t)?"".concat(e).concat(G(r,t),"&"):e},"")+"slots=".concat(t.length,"&rand=").concat(Math.random()),bidRequest:t})}),e},[]))}return n},getOrderedParams:function(e){var r=/^tg_v/,t=/^tg_i/,n=/^eid_|^tpid_/,i=["account_id","site_id","zone_id","size_id","alt_size_ids","p_pos","gdpr","gdpr_consent","us_privacy","gpp","gpp_sid","rp_schain"].concat(Object.keys(e).filter(function(e){return n.test(e)})).concat(["x_liverampidl","ppuid","rf","p_geo.latitude","p_geo.longitude","kw"]).concat(Object.keys(e).filter(function(e){return r.test(e)})).concat(Object.keys(e).filter(function(e){return t.test(e)})).concat(["tk_flint","x_source.tid","l_pb_bid_id","p_screen_res","o_ae","o_cdep","rp_floor","rp_secure","tk_user_key"]);return i.concat(Object.keys(e).filter(function(e){return-1===i.indexOf(e)}))},combineSlotUrlParams:function(e){if(1===e.length)return e[0];var r=e.reduce(function(r,t,n){return Object.keys(t).forEach(function(i){r.hasOwnProperty(i)||(r[i]=new Array(e.length)),r[i].splice(n,1,t[i])}),r},{}),t=new RegExp("^([^;]*)(;\\1)+$");return Object.keys(r).forEach(function(e){var n=r[e].join(";"),i=n.match(t);r[e]=i?i[1]:n}),r},createSlotParams:function(e,r){var t,n,i,d,s,c,u,v,b;e.startTime=(new Date).getTime();var g=e.params,x=R(e,"banner"),y=g.latLong||[],A=(0,o.A)(y,2),j=A[0],S=A[1],k={account_id:g.accountId,site_id:g.siteId,zone_id:g.zoneId,size_id:x[0],alt_size_ids:x.slice(1).join(",")||void 0,rp_floor:(g.floor=parseFloat(g.floor))>=.01?g.floor:void 0,rp_secure:"1",tk_flint:"".concat(_.int_type||"pbjs_lite","_v9.53.2"),"x_source.tid":null===(t=r.ortb2)||void 0===t||null===(t=t.source)||void 0===t?void 0:t.tid,"x_imp.ext.tid":null===(n=e.ortb2Imp)||void 0===n||null===(n=n.ext)||void 0===n?void 0:n.tid,l_pb_bid_id:e.bidId,o_cdep:null===(i=e.ortb2)||void 0===i||null===(i=i.device)||void 0===i||null===(i=i.ext)||void 0===i?void 0:i.cdep,ip:null===(d=e.ortb2)||void 0===d||null===(d=d.device)||void 0===d?void 0:d.ip,ipv6:null===(s=e.ortb2)||void 0===s||null===(s=s.device)||void 0===s?void 0:s.ipv6,p_screen_res:[window.screen.width,window.screen.height].join("x"),tk_user_key:g.userId,"p_geo.latitude":isNaN(parseFloat(j))?void 0:parseFloat(j).toFixed(4),"p_geo.longitude":isNaN(parseFloat(S))?void 0:parseFloat(S).toFixed(4),"tg_fl.eid":e.code,rf:O(e,r)};if("function"==typeof e.getFloor&&!_.disableFloors){var I;try{I=e.getFloor({currency:"USD",mediaType:"banner",size:"*"})}catch(e){(0,f.logError)("Rubicon: getFloor threw an error: ",e)}k.rp_hard_floor=(0,f.isPlainObject)(I)&&"USD"===I.currency&&!isNaN(parseInt(I.floor))?I.floor:void 0}!0===g.bidonmultiformat&&(0,m.A)(e,"mediaTypes")&&Object.keys(e.mediaTypes).length>1&&(k.p_formats=Object.keys(e.mediaTypes).join(","));var T={1:"atf",3:"btf"}[(0,m.A)(e,"mediaTypes.banner.pos")]||"";k.p_pos="atf"===g.position||"btf"===g.position?g.position:T;var P,D=l.$W.getConfig("user.id");return D&&(k.ppuid=D),null!=e&&null!==(c=e.ortb2Imp)&&void 0!==c&&null!==(c=c.ext)&&void 0!==c&&c.ae&&(k.o_ae=1),"number"==typeof(null==e||null===(u=e.ortb2)||void 0===u||null===(u=u.site)||void 0===u?void 0:u.mobile)&&(k["p_site.mobile"]=e.ortb2.site.mobile),function(e,r){var t,n,i,o;if(!1!==_.readTopics){var a=[1,2,5,6,7,507].concat((null===(t=_.sendSiteSegtax)||void 0===t?void 0:t.map(function(e){return Number(e)}))||[]),d=[4,508].concat((null===(n=_.sendUserSegtax)||void 0===n?void 0:n.map(function(e){return Number(e)}))||[]),s=(null===(i=e.ortb2)||void 0===i||null===(i=i.user)||void 0===i?void 0:i.data)||[],c=(null===(o=e.ortb2)||void 0===o||null===(o=o.site)||void 0===o||null===(o=o.content)||void 0===o?void 0:o.data)||[];s.forEach(w(r,"v",d)),c.forEach(w(r,"i",a))}}(r,k),null!=e&&null!==(v=e.ortb2)&&void 0!==v&&null!==(v=v.user)&&void 0!==v&&null!==(v=v.ext)&&void 0!==v&&v.eids&&e.ortb2.user.ext.eids.forEach(function(e){var r=e.source,t=e.uids,n=void 0===t?[]:t,i=e.inserter,o=e.matcher,a=e.mm;e.ext;try{var d=n[0];if(!d)return;var s=function(e){var r,t;return[e.id,e.atype||"","",i||"",o||"",a||"",(null==e||null===(r=e.ext)||void 0===r?void 0:r.rtiPartner)||(null==e||null===(t=e.ext)||void 0===t?void 0:t.rtipartner)||""].join("^")}(d);if(k["eid_".concat(r)]=s,!k.ppuid){var c=n.find(function(e){var r;return"ppuid"===(null===(r=e.ext)||void 0===r?void 0:r.stype)});null!=c&&c.id&&(k.ppuid=c.id)}}catch(e){(0,f.logWarn)("Rubicon: error reading eid:",{source:r,uids:n},e)}}),r.gdprConsent&&("boolean"==typeof r.gdprConsent.gdprApplies&&(k.gdpr=Number(r.gdprConsent.gdprApplies)),k.gdpr_consent=r.gdprConsent.consentString),r.uspConsent&&(k.us_privacy=encodeURIComponent(r.uspConsent)),null!==(b=r.gppConsent)&&void 0!==b&&b.gppString&&(k.gpp=r.gppConsent.gppString,k.gpp_sid=null===(P=r.gppConsent)||void 0===P||null===(P=P.applicableSections)||void 0===P?void 0:P.toString()),k.rp_maxbids=r.bidLimit,function(e,r,t){var n={user:{ext:{data:h({},e.params.visitor)}},site:{ext:{data:h({},e.params.inventory)}}};e.params.keywords&&(n.site.keywords=(0,f.isArray)(e.params.keywords)?e.params.keywords.join(","):e.params.keywords);var i=(0,f.mergeDeep)({},e.ortb2||{},n),d=(0,m.A)(e.ortb2Imp,"ext")||{},s=(0,m.A)(e.ortb2Imp,"ext.data")||{},c=(0,m.A)(e,"ortb2Imp.ext.gpid"),u=(0,m.A)(i,"regs.ext.dsa"),l={user:[4],site:[1,2,5,6,7]},v={user:"tg_v.",site:"tg_i.",adserver:"tg_i.dfp_ad_unit_code",pbadslot:"tg_i.pbadslot",keywords:"kw"},b=function(e,r,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=function(e,r,t){return"data"===r&&Array.isArray(e)?e.filter(function(e){return e.segment&&(0,m.A)(e,"ext.segtax")&&l[t]&&-1!==l[t].indexOf((0,m.A)(e,"ext.segtax"))}).map(function(e){var r=e.segment.filter(function(e){return e.id}).reduce(function(e,r){return e.push(r.id),e},[]);if(r.length>0)return r.toString()}).toString():"object"===(0,a.A)(e)&&!Array.isArray(e)||void 0===e?void 0:Array.isArray(e)?e.filter(function(e){if("object"!==(0,a.A)(e)&&void 0!==e)return e.toString();(0,f.logWarn)("Rubicon: Filtered value: ",e,"for key",r,": Expected value to be string, integer, or an array of strings/ints")}).toString():e.toString()}(e,n,r),d=v[n]&&i?"".concat(v[n]):"data"===n?"".concat(v[r],"iab"):"".concat(v[r]).concat(n);t[d]=t[d]?t[d].concat(",",o):o};if(r===p.D4){["site","user"].forEach(function(e){Object.keys(i[e]).forEach(function(r){"site"===e&&"content"===r&&i[e][r].data?b(i[e][r].data,e,"data"):"ext"!==r?b(i[e][r],e,r):i[e][r].data&&Object.keys(i[e].ext.data).forEach(function(r){b(i[e].ext.data[r],e,r,!1)})})}),Object.keys(s).forEach(function(e){"adserver"!==e?b(s[e],"site",e):"gam"===s[e].name&&b(s[e].adslot,name,e)}),c&&(t.p_gpid=c),u&&Object.keys(u).length&&(0,f.pick)(u,["dsainfo",function(e){return t.dsainfo=e},"dsarequired",function(e){return t.dsarequired=e},"pubrender",function(e){return t.dsapubrender=e},"datatopub",function(e){return t.dsadatatopubs=e},"transparency",function(e){Array.isArray(e)&&e.length&&(t.dsatransparency=e.reduce(function(e,r){var t=r.domain||"";if(!t)return e;var n=r.dsaparams||r.params;return Array.isArray(n)&&0!==n.length?(e&&(e+="~~"),e+"".concat(t,"~").concat(n.join("_"))):e},""))}]),t["tg_i.pbadslot"]&&delete t["tg_i.dfp_ad_unit_code"];var g=(0,m.A)(i,"device.sua");g&&!1!==_.chEnabled&&(0,f.pick)(g,["architecture",function(e){return t.m_ch_arch=e},"bitness",function(e){return t.m_ch_bitness=e},"browsers",function(e){var r,n;if(Array.isArray(e)){var i=e.reduce(function(e,r){var t,n,i,o;return e[0].push('"'.concat(null==r?void 0:r.brand,'"|v="').concat(null==r||null===(t=r.version)||void 0===t?void 0:t[0],'"')),(null==r||null===(n=r.version)||void 0===n?void 0:n.length)>1&&e[1].push('"'.concat(null==r?void 0:r.brand,'"|v="').concat(null==r||null===(i=r.version)||void 0===i||null===(o=i.join)||void 0===o?void 0:o.call(i,"."),'"')),e},[[],[]]),a=(0,o.A)(i,2),d=a[0],s=a[1];t.m_ch_ua=null==d||null===(r=d.join)||void 0===r?void 0:r.call(d,","),t.m_ch_full_ver=null==s||null===(n=s.join)||void 0===n?void 0:n.call(s,",")}},"mobile",function(e){return t.m_ch_mobile="?".concat(e)},"model",function(e){return t.m_ch_model=e},"platform",function(e){var r,n;t.m_ch_platform=null==e?void 0:e.brand,t.m_ch_platform_ver=null==e||null===(r=e.version)||void 0===r||null===(n=r.join)||void 0===n?void 0:n.call(r,".")}])}else Object.keys(d).length&&(0,f.mergeDeep)(t.imp[0].ext,d),c&&(t.imp[0].ext.gpid=c),(0,f.mergeDeep)(t,i)}(e,p.D4,k),!0===l.$W.getConfig("coppa")&&(k.coppa=1),e.schain&&W(e.schain)&&(k.rp_schain=C.serializeSupplyChain(e.schain)),k},serializeSupplyChain:function(e){if(!W(e))return"";var r=e.ver,t=e.complete,n=e.nodes;return"".concat(r,",").concat(t,"!").concat(C.serializeSupplyChainNodes(n))},serializeSupplyChainNodes:function(e){var r=["asi","sid","hp","rid","name","domain"];return e.map(function(e){return r.map(function(r){return encodeURIComponent(e[r]||"")}).join(",")}).join("!")},interpretResponse:function(e,r){var t;e=e.body;var n=r.data;if(!e||"object"!==(0,a.A)(e))return[];if(e.seatbid){var i=(0,m.A)(e,"ext.errors.rubicon");return Array.isArray(i)&&i.length>0&&(0,f.logWarn)("Rubicon: Error in video response"),S.fromORTB({request:n,response:e}).bids}var d,s=e.ads,c=0,u=r.bidRequest;if("object"===(0,a.A)(u)&&!Array.isArray(u)&&P(u).includes(p.G_)&&"object"===(0,a.A)(s)&&(s=s[u.adUnitCode]),!Array.isArray(s)||s.length<1)return[];var l=s.reduce(function(r,t,n){if(t.impression_id&&d===t.impression_id?c++:d=t.impression_id,"ok"!==t.status)return r;var i,s,l=Array.isArray(u)?u[n-c]:u;if(l&&"object"===(0,a.A)(l)){var v={requestId:l.bidId,currency:"USD",creativeId:t.creative_id||"".concat(t.network||"","-").concat(t.advertiser||""),cpm:t.cpm||0,dealId:t.deal,ttl:360,netRevenue:!1!==_.netRevenue,rubicon:{advertiserId:t.advertiser,networkId:t.network},meta:{advertiserId:t.advertiser,networkId:t.network,mediaType:p.D4}};if(t.creative_type&&(v.mediaType=t.creative_type),t.dsa&&Object.keys(t.dsa).length&&(v.meta.dsa=t.dsa),t.adomain&&(v.meta.advertiserDomains=Array.isArray(t.adomain)?t.adomain:[t.adomain]),t.emulated_format&&(v.meta.mediaType=t.emulated_format),t.creative_type===p.G_)v.width=l.params.video.playerWidth,v.height=l.params.video.playerHeight,v.vastUrl=t.creative_depot_url,v.impression_id=t.impression_id,v.videoCacheKey=t.impression_id;else{v.ad=(i=t.script,s=t.impression_id,"<html>\n<head><script type='text/javascript'>inDapIF=true;<\/script></head>\n<body style='margin : 0; padding: 0;'>\n\x3c!-- Rubicon Project Ad Tag --\x3e\n<div data-rp-impression-id='".concat(s,"'>\n<script type='text/javascript'>").concat(i,"<\/script>\n</div>\n</body>\n</html>"));var m=j[t.size_id].split("x").map(function(e){return Number(e)}),b=(0,o.A)(m,2);v.width=b[0],v.height=b[1]}v.rubiconTargeting=(Array.isArray(t.targeting)?t.targeting:[]).reduce(function(e,r){return e[r.key]=r.values[0],e},{rpfl_elemid:l.adUnitCode}),r.push(v)}else(0,f.logError)("Rubicon: bidRequest undefined at index position:".concat(n),u,e);return r},[]).sort(function(e,r){return(r.cpm||0)-(e.cpm||0)}),v=null===(t=e.component_auction_config)||void 0===t?void 0:t.map(function(e){return{config:e,bidId:e.bidId}});return v?{bids:l,paapi:v}:l},getUserSyncs:function(e,r,t,n,i){if(!F&&e.iframeEnabled){var o=(0,x.d)(t,n,i);return o=Object.keys(o).length?"?".concat((0,f.formatQS)(o)):"",F=!0,{type:"iframe",url:"https://".concat(_.syncHost||"eus",".rubiconproject.com/usync.html")+o}}}};function O(e,r){var t;return t=e.params.referrer?e.params.referrer:r.refererInfo.page,e.params.secure?t.replace(/^http:/i,"https:"):t}function k(e){var r,t=document.getElementById(e.adUnitCode);(r=t.querySelector("div[id^='google_ads']"))&&r.style.setProperty("display","none"),function(e){var r=e.querySelector("script[id^='sas_script']"),t=r&&r.nextSibling;t&&"iframe"===t.localName&&t.style.setProperty("display","none")}(t);var n=h(h({},{align:"center",position:"append",closeButton:!1,label:void 0,collapse:!0}),e.renderer.getConfig());e.renderer.push(function(){window.MagniteApex.renderAd({width:e.width,height:e.height,vastUrl:e.vastUrl,placement:{attachTo:"#".concat(e.adUnitCode),align:n.align,position:n.position},closeButton:n.closeButton,label:n.label,collapse:n.collapse})})}function R(e,r){var t=e.params;if(r===p.G_){var n=[];return t.video&&t.video.playerWidth&&t.video.playerHeight?n=[t.video.playerWidth,t.video.playerHeight]:Array.isArray((0,m.A)(e,"mediaTypes.video.playerSize"))&&1===e.mediaTypes.video.playerSize.length?n=e.mediaTypes.video.playerSize[0]:Array.isArray(e.sizes)&&e.sizes.length>0&&Array.isArray(e.sizes[0])&&e.sizes[0].length>1&&(n=e.sizes[0]),n}var i=[];return Array.isArray(t.sizes)?i=t.sizes:void 0!==(0,m.A)(e,"mediaTypes.banner.sizes")?i=I(e.mediaTypes.banner.sizes):Array.isArray(e.sizes)&&e.sizes.length>0?i=I(e.sizes):(0,f.logWarn)("Rubicon: no sizes are setup or found"),E(i)}function w(e,r,t){return function(n){var i,o,a=Number(null===(i=n.ext)||void 0===i?void 0:i.segtax);t.includes(a)&&(e["tg_".concat(r,".tax").concat(a)]=null===(o=n.segment)||void 0===o?void 0:o.map(function(e){return e.id}).join(","))}}function I(e){return(0,f.parseSizesInput)(e).reduce(function(e,r){var t=parseInt(j[r],10);return t&&e.push(t),e},[])}function T(e){var r=void 0!==(0,m.A)(e,"mediaTypes.".concat(p.G_)),t=void 0!==(0,m.A)(e,"mediaTypes.".concat(p.D4)),n=void 0!==(0,m.A)(e,"params.bidonmultiformat"),i="object"!==(0,a.A)((0,m.A)(e,"params.video"));return!(!r||!n)||(t&&i&&(r=!1),r&&i&&(0,b.J)(e,"params.video",{}),r)}function P(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=[];if(T(e)){if(-1===["outstream","instream"].indexOf((0,m.A)(e,"mediaTypes.".concat(p.G_,".context"))))return r&&(0,f.logError)("Rubicon: mediaTypes.video.context must be outstream or instream"),t;if(R(e,p.G_).length<2)return r&&(0,f.logError)("Rubicon: could not determine the playerSize of the video"),t;r&&(0,f.logMessage)("Rubicon: making video request for adUnit",e.adUnitCode),t.push(p.G_)}if(void 0!==(0,m.A)(e,"mediaTypes.".concat(p.s6))&&t.push(p.s6),void 0!==(0,m.A)(e,"mediaTypes.".concat(p.D4))){if(0===R(e,p.D4).length)return r&&(0,f.logError)("Rubicon: could not determine the sizes for banner request"),t;r&&(0,f.logMessage)("Rubicon: making banner request for adUnit",e.adUnitCode),t.push(p.D4)}return t}var D=function(){return _={}},z=function(){return A={}};function E(e){var r=[15,2,9];return e.sort(function(e,t){var n=r.indexOf(e),i=r.indexOf(t);return n>-1||i>-1?-1===n?1:-1===i?-1:n-i:e-t})}function U(e){var r=parseInt((0,m.A)(e,"params.video.size_id"));return isNaN(r)?"outstream"===(0,m.A)(e,"mediaTypes.".concat(p.G_,".context"))?203:201:r}function q(e){return{ranges:{low:[{max:5,increment:.5}],medium:[{max:20,increment:.1}],high:[{max:20,increment:.01}],auto:[{max:5,increment:.05},{min:5,max:10,increment:.1},{min:10,max:20,increment:.5}],dense:[{max:3,increment:.01},{min:3,max:8,increment:.05},{min:8,max:20,increment:.5}],custom:e.getConfig("customPriceBucket")&&e.getConfig("customPriceBucket").buckets}[e.getConfig("priceGranularity")]}}function N(e){var r=!0,t=Object.prototype.toString.call([]),n={mimes:t,protocols:t,linearity:Object.prototype.toString.call(0)};return Object.keys(n).forEach(function(t){Object.prototype.toString.call((0,m.A)(e,"mediaTypes.video."+t))!==n[t]&&(r=!1,(0,f.logError)("Rubicon: mediaTypes.video."+t+" is required and must be of type: "+n[t]))}),r}function W(e){var r=!1,t=["asi","sid","hp"];return e.nodes?((r=e.nodes.reduce(function(e,r){return e?t.every(function(e){return r.hasOwnProperty(e)}):e},!0))||(0,f.logError)("Rubicon: required schain params missing"),r):r}function G(e,r){return"rp_schain"===e?"rp_schain=".concat(r):"".concat(e,"=").concat(encodeURIComponent(r))}var F=!1;function M(){F=!1}(0,u.a$)(C),(0,d.E)("rubiconBidAdapter")}}]);