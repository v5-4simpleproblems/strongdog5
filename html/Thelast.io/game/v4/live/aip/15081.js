"use strict";(self.__VM_WPK_C_LR__m=self.__VM_WPK_C_LR__m||[]).push([[15081],{51720:(n,t,e)=>{e.r(t),e.d(t,{consentConfig:()=>g,enrichFPDHook:()=>h,gdprScope:()=>o,resetConsentData:()=>C,setConsentConfig:()=>D,setOrtbAdditionalConsent:()=>P});var o,r,a=e(90740),i=e(63013),c=e(63172),s=e(75181),l=e(93177),u=e(98757),d=e(85753),p=e(72310),f=e(64701),g={},m={iab:function(n){return new Promise(function(t,e){var o=(0,p.c5)({apiName:"__tcfapi",apiVersion:2,apiArgs:["command","version","callback","parameter"]});o||e(new Error("TCF2 CMP not found.")),o.isDirect?(0,i.logInfo)("Detected CMP API is directly accessible, calling it now..."):(0,i.logInfo)("Detected CMP is outside the current iframe where Prebid.js is located, calling it now..."),o({command:"addEventListener",callback:function(o,r){if((0,i.logInfo)("Received a response from CMP",o),r){try{n(v(o))}catch(n){}if(!1===o.gdprApplies||"tcloaded"===o.eventStatus||"useractioncomplete"===o.eventStatus)try{l.mW.setConsentData(v(o)),t()}catch(n){e(n)}}else e(Error("CMP unable to register callback function.  Please check CMP setup."))}})})}};function v(n){if(t=n&&"boolean"==typeof n.gdprApplies?n.gdprApplies:o,e=n&&n.tcString,"boolean"!=typeof t||!0===t&&!(0,i.isStr)(e))throw Object.assign(new Error("CMP returned unexpected value during lookup process."),{args:[n]});return b(n);var t,e}function b(n){var t={consentString:n?n.tcString:void 0,vendorData:n||void 0,gdprApplies:n&&"boolean"==typeof n.gdprApplies?n.gdprApplies:o};return n&&n.addtlConsent&&(0,i.isStr)(n.addtlConsent)&&(t.addtlConsent=n.addtlConsent),t.apiVersion=2,t}function C(){g={},l.mW.reset()}var y=(0,f.yq)({namespace:"gdpr",displayName:"TCF",consentDataHandler:l.mW,cmpHandlers:m,parseConsentData:v,getNullConsent:function(){return b(null)}});function D(n){var t,e,a,i,c,s;return null!=(null===(t=n=n&&(n.gdpr||n.usp||n.gpp?n.gdpr:n))||void 0===t||null===(t=t.consentData)||void 0===t?void 0:t.getTCData)&&(n.consentData=n.consentData.getTCData),o=!0===(null===(e=n)||void 0===e?void 0:e.defaultGdprScope),r=!(null===(a=n)||void 0===a||!a.dsaPlatform),null===(i=(c=g=y({gdpr:n})).loadConsentData)||void 0===i||null===(i=i.call(c))||void 0===i||null===(s=i.catch)||void 0===s?void 0:s.call(i,function(){return null})}function h(n,t){return n(t.then(function(n){var t=l.mW.getConsentData();return t&&("boolean"==typeof t.gdprApplies&&(0,c.J)(n,"regs.ext.gdpr",t.gdprApplies?1:0),(0,c.J)(n,"user.ext.consent",t.consentString)),r&&(0,c.J)(n,"regs.ext.dsa.dsarequired",3),n}))}function P(n,t){var e,o=null===(e=t.gdprConsent)||void 0===e?void 0:e.addtlConsent;o&&"string"==typeof o&&(0,c.J)(n,"user.ext.ConsentedProvidersSettings.consented_providers",o)}s.$W.getConfig("consentManagement",function(n){return D(n.consentManagement)}),d.w.before(h),(0,u.pS)({type:u.S3,name:"gdprAddtlConsent",fn:P}),(0,a.E)("consentManagementTcf")},64701:(n,t,e)=>{e.d(t,{yq:()=>d});var o=e(82284),r=e(64467),a=e(45458),i=e(51457),c=e(63013),s=e(90740),l=e(79189),u=e(96155);function d(){var n,t,e,d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},p=d.namespace,f=d.displayName,g=d.consentDataHandler,m=d.parseConsentData,v=d.getNullConsent,b=d.cmpHandlers,C=d.DEFAULT_CMP,y=void 0===C?"iab":C,D=d.DEFAULT_CONSENT_TIMEOUT,h=void 0===D?1e4:D;function P(n){return"consentManagement.".concat(p," ").concat(n)}function w(n,t){return n(Object.assign((0,r.A)({},"".concat(p,"Consent"),g.getConsentData()),t))}function O(){return t().then(function(n){return{error:n.error,consentData:g.getConsentData()}})}function A(){var e,o;null==n&&(e=p,o=new WeakSet,n=(0,i.Ak)(e,function(n,e){var r=this;return t().then(function(t){var i=t.consentData,s=t.error;!s||i&&o.has(s)||(o.add(s),c.logWarn.apply(void 0,[s.message].concat((0,a.A)(s.args||[])))),n.call(r,e)}).catch(function(t){c.logError.apply(void 0,["".concat(null==t?void 0:t.message," Canceling auction as per consentManagement config.")].concat((0,a.A)((null==t?void 0:t.args)||[]))),n.stopTiming(),"function"==typeof e.bidsBackHandler?e.bidsBackHandler():(0,c.logError)("Error executing bidsBackHandler")})}),(0,s.m)().requestBids.before(n,50),u.U3.before(w),(0,c.logInfo)("".concat(f," consentManagement module has been activated...")))}return function(r){var a,i,d;if(!(r=null===(a=r)||void 0===a?void 0:a[p])||"object"!==(0,o.A)(r))return(0,c.logWarn)(P("config not defined, exiting consent manager module")),null!=n&&((0,s.m)().requestBids.getHooks({hook:n}).remove(),u.U3.getHooks({hook:w}).remove(),n=null),{};(0,c.isStr)(r.cmpApi)?i=r.cmpApi:(i=y,(0,c.logInfo)(P("config did not specify cmp.  Using system default setting (".concat(y,").")))),(0,c.isNumber)(r.timeout)?d=r.timeout:(d=h,(0,c.logInfo)(P("config did not specify timeout.  Using system default setting (".concat(h,")."))));var C,D=(0,c.isNumber)(r.actionTimeout)?r.actionTimeout:null;"static"===i?(0,c.isPlainObject)(r.consentData)?(e=r.consentData,d=null,C=function(){return new l.U9(function(n){return n(g.setConsentData(m(e)))})}):(0,c.logError)(P("config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")):b.hasOwnProperty(i)?C=b[i]:(g.setConsentData(null),(0,c.logWarn)("".concat(f," CMP framework (").concat(i,") is not a supported framework.  Aborting consentManagement module and resuming auction.")),C=function(){return l.U9.resolve()});var k;return t=function(){return null==k&&(k=function(n){var t,e=n.name,o=n.consentDataHandler,r=n.setupCmp,a=n.cmpTimeout,i=n.actionTimeout,c=n.getNullConsent;return o.enable(),new Promise(function(n,s){var l,u=!1;function d(r){null!=t&&clearTimeout(t),t=null!=r?setTimeout(function(){var t,r=null!==(t=o.getConsentData())&&void 0!==t?t:u?l:c(),a="timeout waiting for ".concat(u?"user action on CMP":"CMP to load");o.setConsentData(r),n({consentData:r,error:new Error("".concat(e," ").concat(a))})},r):null}r(function(n){l=n,u||(u=!0,null!=i&&d(i))}).then(function(){return n({consentData:o.getConsentData()})},s),null!=a&&d(a)}).finally(function(){t&&clearTimeout(t)}).catch(function(n){throw o.setConsentData(null),n})}({name:f,consentDataHandler:g,setupCmp:C,cmpTimeout:d,actionTimeout:D,getNullConsent:v}).catch(function(n){throw k=null,n})),k},A(),{cmpHandler:i,cmpTimeout:d,actionTimeout:D,staticConsentData:e,loadConsentData:O,requestBidsHook:n}}}},72310:(n,t,e)=>{e.d(t,{c5:()=>p,q4:()=>d});var o=e(64467),r=e(80296),a=e(45458),i=e(79189);function c(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,o)}return e}function s(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?c(Object(e),!0).forEach(function(t){(0,o.A)(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):c(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}var l=0,u=1,d=2;function p(n){var t=n.apiName,e=n.apiVersion,c=n.apiArgs,p=void 0===c?["command","callback","parameter","version"]:c,f=n.callbackArgs,g=void 0===f?["returnValue","success"]:f,m=n.mode,v=void 0===m?l:m,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,C={},y="".concat(t,"Call"),D="".concat(t,"Return");function h(n){var t,e="string"==typeof n.data&&n.data.includes(D)?JSON.parse(n.data):n.data;if(null!=e&&null!==(t=e[D])&&void 0!==t&&t.callId){var o=e[D];C.hasOwnProperty(o.callId)&&C[o.callId].apply(C,(0,a.A)(g.map(function(n){return o[n]})))}}var P,w=function(){for(var n,e=b,o=!1;null!=e;){try{if("function"==typeof e[t]){n=e,o=!0;break}}catch(n){}try{if(e.frames["".concat(t,"Locator")]){n=e;break}}catch(n){}if(e===b.top)break;e=e.parent}return[n,o]}(),O=(0,r.A)(w,2),A=O[0],k=O[1];if(A)return k?P=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new i.U9(function(e,o){var i=A[t].apply(A,(0,a.A)(T(s(s({},n),{},{callback:n.callback||v===d?M(n.callback,e,o):void 0})).map(function(n){var t=(0,r.A)(n,2);return t[0],t[1]})));(v===u||null==n.callback&&v===l)&&e(i)})}:(b.addEventListener("message",h,!1),P=function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new i.U9(function(e,a){var i=Math.random().toString(),c=(0,o.A)({},y,s(s({},Object.fromEntries(T(n).filter(function(n){return"callback"!==(0,r.A)(n,1)[0]}))),{},{callId:i}));C[i]=M(null==n?void 0:n.callback,e,a,(t||null==(null==n?void 0:n.callback))&&function(){delete C[i]}),A.postMessage(c,"*"),v===u&&e()})}),Object.assign(P,{isDirect:k,close:function(){!k&&b.removeEventListener("message",h)}});function T(n){return n=Object.assign({version:e},n),p.map(function(t){return[t,n[t]]})}function M(n,t,e,o){var r="function"==typeof n;return function(a,i){o&&o(),v!==u&&(null==i||i?t:e)(r?void 0:a),r&&n.apply(this,arguments)}}}},98757:(n,t,e)=>{e.d(t,{Cf:()=>l,S3:()=>i,Tb:()=>c,WR:()=>s,e4:()=>d,pS:()=>g,qN:()=>u,yB:()=>m,zt:()=>r});var o,r=["request","imp","bidResponse","response"],a=["default","pbs"],i=r[0],c=r[1],s=r[2],l=r[3],u=a[0],d=a[1],p=new Set(r),f=(o={},{registerOrtbProcessor:function(n){var t=n.type,e=n.name,a=n.fn,i=n.priority,c=void 0===i?0:i,s=n.dialects,l=void 0===s?[u]:s;if(!p.has(t))throw new Error("ORTB processor type must be one of: ".concat(r.join(", ")));l.forEach(function(n){o.hasOwnProperty(n)||(o[n]={}),o[n].hasOwnProperty(t)||(o[n][t]={}),o[n][t][e]={priority:c,fn:a}})},getProcessors:function(n){return o[n]||{}}}),g=f.registerOrtbProcessor,m=f.getProcessors}}]);