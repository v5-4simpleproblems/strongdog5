"use strict";(self.__VM_WPK_C_LR__m=self.__VM_WPK_C_LR__m||[]).push([[98282],{17377:(e,t,r)=>{r.r(t),r.d(t,{storage:()=>b,tripleliftAdapterSpec:()=>y});var n=r(64467),i=r(90740),o=r(70433),a=r(63013),s=r(55074),p=r(67436),d=r(75181),l=r(85075),c=r(90407);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var f="triplelift",g=null,v=null,b=(0,l.vM)({bidderCode:f}),y={gvlid:28,code:f,supportedMediaTypes:[s.D4,s.G_],isBidRequestValid:function(e){return void 0!==e.params.inventoryCode},buildRequests:function(e,t){var r,n="https://tlx.3lift.com/header/auction?",i=function(e,t){var r,n={},i=e[0].schain,s=function(e){var t={},r={},n={},i=e.ortb2||{},o=function(){var e=b.getDataFromLocalStorage("opecloud_ctx");if(!e)return null;try{return JSON.parse(e)}catch(e){return(0,a.logError)("Triplelift: error parsing JSON: ",e),null}}(),s=Object.assign({},i.site),p=Object.assign({},i.user);if(o){p.data=p.data||[];try{p.data.push({name:"www.1plusx.com",ext:o})}catch(e){(0,a.logError)("Triplelift: error adding 1plusX segments: ",e)}}return S(r,s),S(n,p),(0,a.isEmpty)(r)||(t.context=r),(0,a.isEmpty)(n)||(t.user=n),t}(t);n.imp=e.map(function(e,t){var r,n,i,o,s={id:t,tagid:e.params.inventoryCode,floor:x(e)};return h(e)&&(s.video=function(e){var t=m(m({},e.params.video),e.mediaTypes.video);try{t.w||(t.w=t.playerSize[0][0]),t.h||(t.h=t.playerSize[0][1])}catch(e){(0,a.logWarn)("Video size not defined",e)}return t.playbackmethod&&Number.isInteger(t.playbackmethod)&&(t.playbackmethod=Array.from(String(t.playbackmethod),Number)),delete t.playerSize,t}(e)),e.mediaTypes.banner&&!_(e)&&(s.banner={format:(o=e.sizes,o.filter(E).map(function(e){return{w:e[0],h:e[1]}}))}),(0,a.isEmpty)(e.ortb2Imp)||(s.fpd=(r=e.ortb2Imp,n={},S(i={},r.ext),(0,a.isEmpty)(i)||(n.context=i),n),(0,a.isEmpty)(e.ortb2Imp.ext)||(s.ext=m({},e.ortb2Imp.ext))),s});var p=[];e[0].userIdAsEids&&(p=o.A(e[0],"userIdAsEids"),n.user={ext:{eids:p}});var d=function(e,t){var r={};return(0,a.isEmpty)(e)||(r.schain=m({},e)),(0,a.isEmpty)(t)||(r.fpd=m({},t)),r}(i,s);return(0,a.isEmpty)(d)||(n.ext=d),null!=t&&null!==(r=t.ortb2)&&void 0!==r&&null!==(r=r.regs)&&void 0!==r&&r.gpp&&(n.regs=Object.assign({},t.ortb2.regs)),null!=t&&t.ortb2&&(n.ext.ortb2=Object.assign({},t.ortb2)),n}(e,t);if(n=(0,c.v)(n,"lib","prebid"),n=(0,c.v)(n,"v","9.53.2"),t&&t.refererInfo){var s=t.refererInfo.page;n=(0,c.v)(n,"referrer",s)}return t&&t.timeout&&(n=(0,c.v)(n,"tmax",t.timeout)),t&&t.gdprConsent&&(g=void 0===t.gdprConsent.gdprApplies||t.gdprConsent.gdprApplies,n=(0,c.v)(n,"gdpr",g.toString()),void 0!==t.gdprConsent.consentString&&(v=t.gdprConsent.consentString,n=(0,c.v)(n,"cmp_cs",v))),t&&t.uspConsent&&(n=(0,c.v)(n,"us_privacy",t.uspConsent)),null!=t&&null!==(r=t.paapi)&&void 0!==r&&r.enabled&&(n=(0,c.v)(n,"fledge",t.paapi.enabled)),!0===d.$W.getConfig("coppa")&&(n=(0,c.v)(n,"coppa",!0)),n.lastIndexOf("&")===n.length-1&&(n=n.substring(0,n.length-1)),(0,a.logMessage)("tlCall request built: "+n),{method:"POST",url:n,data:i,bidderRequest:t}},interpretResponse:function(e,t){var r=t.bidderRequest,n=e.body.bids||[],i=e.body.paapi||[];if(n=n.map(function(e){return function(e,t){var r={},n=t.width||1,i=t.height||1,o=t.deal_id||"",a=t.crid||"",s=e.bids[t.imp_id];return 0!=t.cpm&&t.ad&&(r={requestId:s.bidId,cpm:t.cpm,width:n,height:i,netRevenue:!0,ad:t.ad,creativeId:a,dealId:o,currency:"USD",ttl:300,tl_source:t.tl_source,meta:{}},h(s)&&"video"===t.media_type&&(r.vastXml=t.ad,r.mediaType="video",r.ttl=3600),t.advertiser_name&&(r.meta.advertiserName=t.advertiser_name),t.adomain&&t.adomain.length&&(r.meta.advertiserDomains=t.adomain),t.tl_source&&"hdx"==t.tl_source&&(h(s)&&"video"===t.media_type?r.meta.mediaType="video":r.meta.mediaType="banner"),t.tl_source&&"tlx"==t.tl_source&&(r.meta.mediaType="native"),a&&(r.meta.networkId=a.slice(0,a.indexOf("_")))),r}(r,e)}),i.length>0){var o=i.map(function(e){return{bidId:r.bids[e.imp_id].bidId,config:e.auctionConfig}});return(0,a.logMessage)("Response with FLEDGE:",{bids:n,fledgeAuctionConfigs:o}),{bids:n,paapi:o}}return n},getUserSyncs:function(e,t,r,n,i){var o=function(e){if(e)return e.iframeEnabled?"iframe":e.pixelEnabled?"image":void 0}(e);if(o){var a="https://eb2.3lift.com/sync?";return"image"===o&&(a=(0,c.v)(a,"px",1),a=(0,c.v)(a,"src","prebid")),(null!==v||g)&&(a=(0,c.v)(a,"gdpr",g),a=(0,c.v)(a,"cmp_cs",v)),n&&(a=(0,c.v)(a,"us_privacy",n)),i&&(i.gppString&&(a=(0,c.v)(a,"gpp",i.gppString)),i.applicableSections&&0!==i.applicableSections.length&&(a=(0,c.v)(a,"gpp_sid",i.applicableSections.filter(function(e){return Number.isInteger(e)}).join(",")))),[{type:o,url:a}]}}};function h(e){return O(e)&&(_(e)||function(e){return O(e)&&"outstream"===e.mediaTypes.video.context.toLowerCase()}(e))}function _(e){return O(e)&&"instream"===e.mediaTypes.video.context.toLowerCase()}function O(e){return e.mediaTypes.video&&e.mediaTypes.video.context}function x(e){var t=null;if("function"==typeof e.getFloor)try{var r=e.getFloor({currency:"USD",mediaType:h(e)?"video":"banner",size:"*"});a.isPlainObject(r)&&"USD"===r.currency&&!isNaN(parseFloat(r.floor))&&(t=parseFloat(r.floor))}catch(e){(0,a.logError)("Triplelift: getFloor threw an error: ",e)}return null!==t?t:e.params.floor}function S(e,t){(0,a.isEmpty)(t)||Object.keys(t).forEach(function(r){null!=t[r]&&(e[r]=t[r])})}function E(e){return 2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}(0,p.a$)(y),(0,i.E)("tripleliftBidAdapter")},90407:(e,t,r)=>{function n(e,t,r){return r?e+t+"="+encodeURIComponent(r)+"&":e}r.d(t,{v:()=>n})}}]);