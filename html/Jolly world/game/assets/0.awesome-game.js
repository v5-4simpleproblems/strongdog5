(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"./node_modules/gamestats.js/build/gamestats-pixi.module.js":function(t,e,a){"use strict";function i(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.r(e);var h=function(){function t(e,a,i,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pixi=a,this.main=e,this.app=i,this.hijackedGL=!1;this.config=Object.assign({maxMemorySize:350,COLOR_MEM_TEXTURE:"#8ddcff",COLOR_MEM_BUFFER:"#ffd34d"},s),this.config.baseCanvasWidth=100*this.main.config.scale,this.config.baseCanvasHeight=80*this.main.config.scale,this.memGraph={width:this.config.baseCanvasWidth,height:.38*this.config.baseCanvasHeight,drawY:.5*this.config.baseCanvasHeight,barWidth:this.config.baseCanvasWidth/this.main.config.maximumHistory},this.dom,this.canvas,this.ctx,this.graphYOffset=0,this.tempDrawCalls=0,this.drawCalls=0,this.realGLDrawElements=null,this.init()}var e,a,h;return e=t,(a=[{key:"init",value:function(){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=this.config.baseCanvasWidth,this.canvas.height=this.config.baseCanvasHeight,this.canvas.style.cssText="width:".concat(this.config.baseCanvasWidth*this.main.config.scale,"px;height:").concat(this.config.baseCanvasHeight*this.main.config.scale,"px;background-color:").concat(this.main.config.COLOR_BG),this.main.dom.appendChild(this.canvas),this.update=this.update.bind(this),this.update()}},{key:"collectStats",value:function(){var t,e=(s(t={},this.pixi.FORMATS.RGB,3),s(t,this.pixi.FORMATS.RGBA,4),s(t,this.pixi.FORMATS.DEPTH_COMPONENT,3),s(t,this.pixi.FORMATS.DEPTH_STENCIL,4),s(t,this.pixi.FORMATS.ALPHA,1),s(t,this.pixi.FORMATS.LUMINANCE,1),s(t,this.pixi.FORMATS.LUMINANCE_ALPHA,2),t),a=this.app.renderer.texture.managedTextures,i=this.app.renderer.buffer?this.app.renderer.buffer.managedBuffers:this.app.renderer.geometry.managedBuffers,h=this.app.renderer.framebuffer.managedFramebuffers,n=0;for(var r in a){var l=a[r];n+=l.width*l.height*e[l.format]}var c=0;for(var f in i)c+=i[f].data.byteLength;return{count:{textures:a.length,buffers:Object.keys(i).length,renderTextures:h.length},mem:{textures:n/1048576,buffers:c/1048576}}}},{key:"draw",value:function(){var t=this.collectStats();this.drawCounts(t.count),this.drawMem(t.mem)}},{key:"formatNum",value:function(t){return t<1e3?t:t>=1e3&&t<1e6?+(t/1e3).toFixed(1)+"K":t>=1e6&&t<1e9?+(t/1e6).toFixed(1)+"M":+(t/1e9).toFixed(1)+"?"}},{key:"drawCounts",value:function(t){var e=t.textures,a=t.buffers,i=t.renderTextures,s=this.ctx,h=this.config,n=this.main.config,r=.02*h.baseCanvasHeight;s.clearRect(0,0,s.canvas.width,.46*s.canvas.height),s.textAlign="left";var l=.09*h.baseCanvasWidth;s.font="".concat(l,"px ").concat(n.FONT_FAMILY),s.textBaseline="top",s.fillStyle=n.COLOR_TEXT_LABEL,s.fillText("textures buffers render-t",2*r,r),l=.09*h.baseCanvasWidth,s.font="".concat(l,"px ").concat(n.FONT_FAMILY);var c=.2*h.baseCanvasWidth,f=.1*h.baseCanvasWidth;s.textAlign="right";var o=r+.33*h.baseCanvasWidth;s.fillStyle=n.COLOR_FPS_BAR,s.fillText("".concat(this.formatNum(e)),o,f+r),s.fillStyle=n.COLOR_FPS_BAR,s.fillText("".concat(this.formatNum(a)),o+1.51*c,f+r),s.fillStyle=n.COLOR_FPS_BAR,s.fillText("".concat(this.formatNum(i)),o+3.2*c,f+r),s.textAlign="left",s.fillStyle=n.COLOR_TEXT_LABEL,s.fillText("drawcalls",2*r,.21*h.baseCanvasWidth),s.textAlign="right",s.fillStyle=n.COLOR_FPS_BAR,s.fillText("".concat(this.formatNum(this.drawCalls)),o+4*r,.3*h.baseCanvasWidth)}},{key:"drawMem",value:function(t){var e=t.textures,a=t.buffers,i=this.config,s=this.main.config,h=this.ctx,n=h.getImageData(1,0,h.canvas.width-this.memGraph.barWidth,h.canvas.height);h.putImageData(n,0,0),h.clearRect(h.canvas.width-this.memGraph.barWidth,0,this.memGraph.barWidth,h.canvas.height),this.drawMemGraph(e,i.COLOR_MEM_TEXTURE),this.drawMemGraph(a,i.COLOR_MEM_BUFFER,e),h.clearRect(0,.87*h.canvas.height,h.canvas.width,.2*h.canvas.height);var r=.01*i.baseCanvasHeight;h.textAlign="left";var l=.09*i.baseCanvasWidth;h.textBaseline="top",h.font="".concat(l,"px ").concat(s.FONT_FAMILY);var c=.2*i.baseCanvasWidth,f=.88*i.baseCanvasHeight;h.fillStyle=i.COLOR_MEM_TEXTURE,h.fillText("mem-tex",r,f+r),h.fillStyle=i.COLOR_MEM_BUFFER,h.fillText("mem-buf",2.2*c-2*r,f+r),this.graphYOffset=0}},{key:"drawMemGraph",value:function(t,e,a){var i=this.config,s=this.main.config,h=this.ctx;a&&t+a>i.maxMemorySize&&(t=Math.max(0,i.maxMemorySize-a));var n=0;this.graphYOffset&&(n+=this.graphYOffset);var r=s.maximumHistory*this.memGraph.barWidth-this.memGraph.barWidth,l=this.memGraph.drawY,c=this.memGraph.barWidth,f=Math.min(1,t/i.maxMemorySize)*this.memGraph.height;l+=this.memGraph.height-f-n,h.globalAlpha=.5,h.fillStyle=e,h.fillRect(r,l,c,f),h.globalAlpha=1,h.fillRect(r,l,c,c),this.graphYOffset=(this.graphYOffset||0)+f}},{key:"hijackGL",value:function(){this.realGLDrawElements=this.app.renderer.gl.drawElements,this.app.renderer.gl.drawElements=this.fakeGLdrawElements.bind(this),this.hijackedGL=!0}},{key:"fakeGLdrawElements",value:function(t,e,a,i){this.tempDrawCalls++,this.realGLDrawElements.call(this.app.renderer.gl,t,e,a,i)}},{key:"restoreGL",value:function(){this.app.renderer.gl.drawElements=this.realGLDrawElements,this.hijackedGL=!1}},{key:"update",value:function(){this.main.shown&&this.pixi&&this.app?(this.hijackedGL||this.hijackGL(),this.draw()):this.hijackedGL&&this.restoreGL()}},{key:"endFrame",value:function(){this.drawCalls=this.tempDrawCalls,this.tempDrawCalls=0}}])&&i(e.prototype,a),h&&i(e,h),t}();e.default=h}}]);
//# sourceMappingURL=0.awesome-game.js.map